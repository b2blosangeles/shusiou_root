<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://master1_dev.shusiou.win/js/react/react.min.js"></script>
    <script src="https://master1_dev.shusiou.win/js/react/react-dom.min.js"></script>
    <script src="https://master1_dev.shusiou.win/js/react/react-cookie.0.4.9.min.js"></script>
    <script src="https://master1_dev.shusiou.win/js/react/ReactRouter/3.0.2/ReactRouter.min.js"></script>      
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
      
    <script type="text/babel">
      $( document ).ready(function() {  
            (functon(cfg.package) {
            var _plugin = React.createClass({
            getInitialState: function() {
               var me = this;
               return {}
            },
            componentDidMount:function(prevState, prevProps) {
              var me = this;
              me.loadPlugin();
            },
             loadPlugin : function() {
                var me = this;
                me._asyncModule = null;
                $.ajax({
                   type: 'POST',
                   url: 'https://master1_dev.shusiou.win/api/JSXhub.api',
                   data: cfg,
                   dataType: 'JSON',
                   timeout: (6 * 1000),
                   success: function(resultData){
                      me._asyncModule = resultData;
                     console.log(resultData);
                     me.setState({success: true, update : new Date().getTime()});
                   },
                   error : function(xhr, textStatus, error) { 
                   console.log(error);
                     me._asyncModuleErr = error;
                     me.setState({success: false, update : new Date().getTime()})
                   }
                });		
              },
            render() {
                var me = this;
                var _asyncOBJ = React.createClass({render: function() { return (<span>niuo</span>)}});
                if (me._asyncModule) {
                    console.log(decodeURIComponent(me._asyncModule.code));
                    eval(decodeURIComponent(me._asyncModule.code));   
                }
                return (
                  <div><_asyncOBJ parent={me} /></div>
                );
              }
            }); 
            
            ReactDOM.render(<_plugin code={'publicNews'} />, cfg.viewPoint);
            })({package:{
                     includes : [],
                     main : '/files/js/module/publicNews/main.jsx',
                     code : 'publicNews'
                    }, document.body})
  
      });
      </script>
  </head>
  <body></body>
</html>
