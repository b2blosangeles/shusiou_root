<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<script>
    (function( $ ) {

    var reader = {};
    var file = {};
    var slice_size = 1000 * 1024;

    function start_upload( event ) {
        event.preventDefault();

        reader = new FileReader();
        file = document.querySelector( '#dbi-file-upload' ).files[0];

        upload_file( 0 );
    }
    $( '#dbi-file-upload-submit' ).on( 'click', start_upload );

    function upload_file( start ) {
        reader.onloadend = function( event ) {
            if ( event.target.readyState !== FileReader.DONE ) {
                alert(start+'===');
                return;
            } else {
                alert('FileReader.DONE');
            }

            // At this point the file data is loaded to event.target.result
        };        
        

    }

})( jQuery );
</script>    
<form>
    <input type="file" name="dbi_import_file" /><br><br>
    <hr/>
    <input id="dbi-file-upload-submit" class="button button-primary" type="submit" value="Upload" onCLick="start_upload()" />
</form>
