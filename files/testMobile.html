<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Upload Videos Demo</title>
    <link rel="stylesheet"  href="/css/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet"> 
    <link rel="stylesheet"  href="/css/Bootstrap/v4.1.3/Bootstrap.min.css" rel="stylesheet"> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        function sendToNative() {
        window.webkit.messageHandlers.jsHandler.postMessage("trigger from JS");
            alert('JS Trigger Sent');
        }
        function alertOnly() {
            alert('alertOnly');
        }  
        
        function loadVideos() {
                $.ajax({
                  url: '/api/platoplan/videoUpDemoAPI.api?code=videoList',
                  data: {},
                  success: function(data ) {
                      var str = '';
                      for (var i = 0; i < data.length; i++) {
                        str += '<div class="col-sm-3 pt-3"><a href="JavaScript: void(0)" onClick="playVideo(\'' +  data[i] + '\')">' + 
                          '<img src="/api/platoplan/videoUpDemoAPI.api?code=cutImage&fn=' + data[i] + '" ' +
                          ' width="100%" class="shadow border border-danger rounded"/></a></div>'
                      }
                      $('.row').html(str);
                  },
                  dataType: 'json'
                });
        }        
        function playVideo(fn) {
                var str = '<video controls autoplay style="height:600px; border border-danger rounded">' +
                    '<source src="/api/platoplan/videoUpDemoAPI.api?code=playVideo&fn='+fn+'" type="video/mp4">' +
                    'Your browser does not support the video tag.' +
                    '</video>';
                $('.row').html(str);
        }
        $(document).ready(
            function() {
               loadVideos()
            }
        );
    </script>    
</head>
<body>
    <input class="btn btn-lg btn-success" type="button" onclick="sendToNative()" value="sendToNative">&nbsp;
    <input class="btn btn-lg btn-success"  type="button" onclick="alertOnly()" value="alertOnly">&nbsp;
    <input class="btn btn-lg btn-warning"  type="button" onclick="alertOnly()" value="goback">
    <hr/>
    <div class="container-fluid">
        <div class="row">
        </div>
    </div>
</body>
</html>
