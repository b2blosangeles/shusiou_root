<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Upload Videos Demo</title>
    <link rel="stylesheet"  href="/css/Bootstrap/v4.1.3/Bootstrap.min.css" rel="stylesheet"> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        function sendToNative() {
        window.webkit.messageHandlers.jsHandler.postMessage("trigger from JS");
            alert('JS Trigger Sent');
        }
        function alertOnly() {
            alert('alertOnly');
        }  
        
        function loadVideos() {
                $.ajax({
                  url: '/api/platoplan/videoUpDemoAPI.api?code=videoList',
                  data: {},
                  success: function(data ) {
                      var str = '';
                      for (var i = 0; i < data.length; i++) {
                        str += '<div class="col-sm-3 p-3"><a href="JavaScript: void(0)" onClick="playVideo(\'' +  data[i] + '\')">' + 
                          '<img src="/api/platoplan/videoUpDemoAPI.api?code=cutImage&fn=' + data[i] + '" ' +
                          ' width="100%" class="shadow border border-secondary rounded"/></a></div>'
                      }
                      $('#body-section').html(str);
                  },
                  dataType: 'json'
                });
        }        
        function playVideo(fn) {
                var str = '<video controls autoplay style="height:600px; border border-secondary rounded">' +
                    '<source src="/api/platoplan/videoUpDemoAPI.api?code=playVideo&fn='+fn+'" type="video/mp4">' +
                    'Your browser does not support the video tag.' +
                    '</video>';
                $('#body-section').html(str);
        }
        $(document).ready(
            function() {
               loadVideos()
            }
        );
    </script>    
</head>
<body>
    <div class="container-fluid">
         <div class="row py-3">
             <div class="col-sm-3 p-3">
                <img src="http://dev.platoplan.com/icons/icon-message.png"  width="100%" onclick="sendToNative()" class="border border-warning rounded  bg-warning"/>
             </div>
             <div class="col-sm-3 p-3">
                <img src="http://dev.platoplan.com/icons/icon-alert.png"  width="100%" onclick="alertOnly()" class="border border-warning rounded  bg-warning"/>
             </div>
             <div class="col-sm-3 p-3">
                <img src="http://dev.platoplan.com/icons/icon-home.png"  width="100%" onclick="loadVideos()" class="border border-warning rounded  bg-warning"/>
             </div>
        </div>
        <div id="body-section" class="row">
        </div>
    </div>
</body>
</html>
